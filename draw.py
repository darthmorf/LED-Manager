#!/usr/bin/env python
from datetime import datetime


def clock(color, grid):

    time = datetime.now().strftime("%H%M")

    for i in range(len(time)):
        clockDigit(i,int(time[i]), color, grid)

    grid.setPixel(31, 6, color)
    grid.setPixel(32, 6, color)
    grid.setPixel(31, 7, color)
    grid.setPixel(32, 7, color)
    grid.setPixel(31, 8, color)
    grid.setPixel(32, 8, color)

    grid.setPixel(31, 15, color)
    grid.setPixel(32, 15, color)
    grid.setPixel(31, 16, color)
    grid.setPixel(32, 16, color)
    grid.setPixel(31, 17, color)
    grid.setPixel(32, 17, color)


def clockDigit(index, value, color, grid):
    x = 0
    y = 3

    if index == 0:
        x = 3
    elif index == 1:
        x = 3 + 10 + 4
    elif index == 2:
        x = 3 + 10 + 4 + 10 + 10
    else:
        x = 3 + 10 + 4 + 10 + 10 + 10 + 4

    chars = [
                [
                    "  111111  ",
                    " 11111111 ",
                    "111   1111",
                    "11    1111",
                    "11   11111",
                    "11   11 11",
                    "11   11 11",
                    "11  111 11",
                    "11  11  11",
                    "11  11  11",
                    "11 111  11",
                    "11 11   11",
                    "11 11   11",
                    "11111   11",
                    "1111    11",
                    "1111   111",
                    " 11111111 ",
                    "  111111  "
                ],
                [
                    "      1   ",
                    "     11   ",
                    "    111   ",
                    "   1111   ",
                    "  11 11   ",
                    " 11  11   ",
                    " 1   11   ",
                    "     11   ",
                    "     11   ",
                    "     11   ",
                    "     11   ",
                    "     11   ",
                    "     11   ",
                    "     11   ",
                    "     11   ",
                    "     11   ",
                    "  11111111",
                    "  11111111"
                ],
                [
                    "  111111  ",
                    " 11111111 ",
                    "111    111",
                    "11      11",
                    "1       11",
                    "        11",
                    "        11",
                    "       111",
                    "      111 ",
                    "     111  ",
                    "    111   ",
                    "   111    ",
                    "  111     ",
                    " 111      ",
                    "111       ",
                    "11        ",
                    "1111111111",
                    "1111111111"
                ],
                [
                    "  111111  ",
                    " 11111111 ",
                    "111    111",
                    "11      11",
                    "1       11",
                    "       111",
                    "      111 ",
                    "    1111  ",
                    "    1111  ",
                    "      111 ",
                    "       111",
                    "        11",
                    "        11",
                    "1       11",
                    "11      11",
                    "111    111",
                    " 11111111 ",
                    "  111111  "
                ],
                [
                    "     111  ",
                    "     111  ",
                    "    1111  ",
                    "    1111  ",
                    "   11 11  ",
                    "   11 11  ",
                    "  11  11  ",
                    "  11  11  ",
                    " 11   11  ",
                    " 11   11  ",
                    "11    11  ",
                    "11    11  ",
                    "1111111111",
                    "1111111111",
                    "      11  ",
                    "      11  ",
                    "      11  ",
                    "      11  "
                ],
                [
                    "1111111111",
                    "1111111111",
                    "11        ",
                    "11        ",
                    "11        ",
                    "11        ",
                    "11 11111  ",
                    "111111111 ",
                    "111    111",
                    "        11",
                    "        11",
                    "        11",
                    "        11",
                    "        11",
                    "11      11",
                    "111    111",
                    " 11111111 ",
                    "  111111  "
                ],
                [
                    "   11111  ",
                    "  1111111 ",
                    " 111   111",
                    "111     11",
                    "11      11",
                    "11        ",
                    "11        ",
                    "11        ",
                    "11 11111  ",
                    "111111111 ",
                    "111    111",
                    "11      11",
                    "11      11",
                    "11      11",
                    "11      11",
                    "111    111",
                    " 11111111 ",
                    "  111111  "
                ],
                [
                    "1111111111",
                    "1111111111",
                    "        11",
                    "        11",
                    "       111",
                    "       11 ",
                    "      111 ",
                    "     111  ",
                    "     11   ",
                    "     11   ",
                    "    111   ",
                    "    11    ",
                    "    11    ",
                    "   111    ",
                    "   11     ",
                    "   11     ",
                    "   11     ",
                    "   11     "
                ],
                [
                    "  111111  ",
                    " 11111111 ",
                    "111    111",
                    "11      11",
                    "11      11",
                    "11      11",
                    "111    111",
                    " 11111111 ",
                    "  111111  ",
                    " 11111111 ",
                    "111    111",
                    "11      11",
                    "11      11",
                    "11      11",
                    "11      11",
                    "111    111",
                    " 11111111 ",
                    "  111111  "
                ],
                [
                    "  111111  ",
                    " 11111111 ",
                    "111    111",
                    "11      11",
                    "11      11",
                    "11      11",
                    "11      11",
                    "11      11",
                    "111    111",
                    " 111111111",
                    "  11111111",
                    "       111",
                    "        11",
                    "        11",
                    "1       11",
                    "11     111",
                    "111111111 ",
                    " 1111111  "
                ]
            ]

    char = chars[value]

    for i in range(len(char)):
        for j in range(len(char[i])):
            if char[i][j] == "1":
                grid.setPixel(x+j, y+i, color)


def clockDay(color, grid):
    x = 3
    y = 22
    
    value = datetime.now().weekday()

    days = [
        [
            "1   1             1         ",
            "1   1             1         ",
            "11 11  11  11   111  11  1 1",
            "11 11 1  1 1 1 1  1    1 1 1",
            "1 1 1 1  1 1 1 1  1   11 1 1",
            "1 1 1 1  1 1 1 1  1  1 1   1 ",
            "1 1 1  11  1 1  11 1 11 1  1 ",
            "                           1 ",
            "                         11  " 
        ],
        [
          "11111                   1         ",
          "  1                     1         ",
          "  1  1 1   11   1111  111  11  1 1",
          "  1  1 1  1  1 1     1  1    1 1 1",
          "  1  1 1  1111  111  1  1   11 1 1",
          "  1  1 1  1        1 1  1  1 1   1 ",
          "  1   1 1  111 1111   11 1 11 1  1 ",
          "                                 1 ",
          "                               11  " 
        ],
        [
            "1     1         1                    1         ",
            "1     1         1                    1         ",
            "1  1  1  11   111  11   11   1111  111  11  1 1",
            " 1 1 1  1  1 1  1  1 1 1  1 1     1  1    1 1 1",
            " 1 1 1  1111 1  1  1 1 1111  111  1  1   11 1 1",
            "  1 1   1    1  1  1 1 1        1 1  1  1 1   1 ",
            "  1 1    111  11 1 1 1  111 1111   11 1 11 1  1 ",
            "                                              1 ",
            "                                            11  "
        ],
        [
            "11111 1                     1         ",
            "  1   1                     1         ",
            "  1   11  1 1 1 1   1111  111  11  1 1",
            "  1   1 1 1 1  1 1 1     1  1    1 1 1",
            "  1   1 1 1 1  1    111  1  1   11 1 1",
            "  1   1 1 1 1  1       1 1  1  1 1   1 ",
            "  1   1 1 11 1 1   1111   11 1 11 1  1 ",
            "                                     1 ",
            "                                   11  "
        ],
        [
            "1111          1         ",
            "1             1         ",
            "1   1 1  1  111  11  1 1",
            "111  1 1   1  1    1 1 1",
            "1    1   1 1  1   11 1 1",
            "1    1   1 1  1  1 1   1 ",
            "1    1   1  11 1 11 1  1 ",
            "                       1 ",
            "                     11  "
        ],
        [
            " 11                        1         ",
            "1  1       1               1         ",
            "1    11   111 1 1  1 1   111  11  1 1",
            " 11    1   1  1 1   1 1 1  1    1 1 1",
            "   1  11   1  1 1   1   1  1   11 1 1",
            "1  1 1 1   1  1 1   1   1  1  1 1   1 ",
            " 11  11 1  11  1 1  1    11 1 11 1  1 ",
            "                                    1 ",
            "                                  11  " 
        ],
        [      
            " 11              1         ",
            "1  1             1         ",
            "1    1 1  11   111  11  1 1",
            " 11  1 1  1 1 1  1    1 1 1",
            "   1 1 1  1 1 1  1   11 1 1",
            "1  1 1 1  1 1 1  1  1 1   1 ",
            " 11   1 1 1 1  11 1 11 1  1 ",
            "                          1 ",
            "                        11  "
        ]
    ]

    day = days[value]
    for i in range(len(day)):
        for j in range(len(day[i])):
            if day[i][j] == "1":
                grid.setPixel(x+j, y+i, color)

    return len(day[0])

def clockDate(color, grid, daylength):
    x = daylength + 4
    y = 23

    numbers = [
        [
            " 111 ",
            "1   1",
            "1   1",
            "1   1",
            "1   1",
            "1   1",
            " 111 "
        ],
        [
            "  1",
            " 11",
            "  1",
            "  1",
            "  1",
            "  1",
            "  1"
        ],
        [
            " 111 ",
            "1   1",
            "    1",
            "   1 ",
            "  1  ",
            " 1   ",
            "11111"
        ],
        [
            " 111 ",
            "    1",
            "    1",
            "  11 ",
            "    1",
            "    1",
            " 111  "
        ],
        [
            "  11 ",
            " 1 1 ",
            " 1 1 ",
            "1  1 ",
            "11111",
            "   1 ",
            "   1 "
        ],
        [
            " 1111",
            " 1   ",
            " 1   ",
            " 111 ",
            "    1",
            " 1  1",
            "  11 ",
        ],
        [
            "  11 ",
            " 1  1",
            " 1   ",
            " 111 ",
            " 1  1",
            " 1  1",
            "  11 "
        ],
        [
            " 1111",
            "    1",
            "    1",
            "   1 ",
            "   1 ",
            "  1  ",
            "  1  "
        ],
        [
            "  11 ",
            " 1  1",
            " 1  1",
            "  11 ",
            " 1  1",
            " 1  1",
            "  11 ",
        ],
        [
            "  11 ",
            " 1  1",
            " 1  1",
            "  111",
            "    1",
            " 1  1",
            "  11 ",
        ]
    ]

    ordinals = [
        [
            "        ",
            "      1 ",
            " 111 111",
            "1     1 ",
            " 11   1 ",
            "   1  1 ",
            "111   11"
        ],
        [
            "       1 ",
            "       1 ",
            "11   111 ",
            "1 1 1  1 ",
            "1 1 1  1 ",
            "1 1 1  1 ",
            "1 1  11 1"
        ],
        [
            "        1 ",
            "        1 ",
            "1 1   111 ",
            " 1 1 1  1 ",
            " 1   1  1 ",
            " 1   1  1 ",
            " 1    11 1"
        ],
        [
            "    1  ",
            " 1  1  ",
            "111 11 ",
            " 1  1 1",
            " 1  1 1",
            " 1  1 1",
            " 11 1 1",
        ]
    ]

    date = datetime.today().strftime("%d")

    value1 = int(date[0])

    if value1 != 0:
        number = numbers[value1]
        for i in range(len(number)):
            for j in range(len(number[i])):
                if number[i][j] == "1":
                    grid.setPixel(x+j, y+i, color)
        x += len(number[0])

    value2 = -1
    if len(date) > 1:
        value2 = int(date[1])
        x += 1
        number = numbers[value2]
        for i in range(len(number)):
            for j in range(len(number[i])):
                if number[i][j] == "1":
                    grid.setPixel(x+j, y+i, color)

        x += len(number[0])

    x += 1
    if value2 != -1:
         day = int(str(value1) + str(value2))
    else:
        day = int(value1)

    if 4 <= day <= 20 or 24 <= day <= 30:
        ordinal = ordinals[3]
    else:
        ordinal = ordinals[day % 10 - 1]
    
    for i in range(len(ordinal)):
        for j in range(len(ordinal[i])):
            if ordinal[i][j] == "1":
                grid.setPixel(x+j, y+i, color)


    